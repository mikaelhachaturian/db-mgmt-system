# Dockerfile

FROM node:16-alpine

ARG WATSON_AUTH_TOKEN
ARG PUBLIC_GOOGLE_CLIENT_ID
ARG PUBLIC_WATSON_BACKEND_URL
ARG SUPER_SECRET_SESSION_KEY

ENV WATSON_AUTH_TOKEN $WATSON_AUTH_TOKEN
ENV PUBLIC_GOOGLE_CLIENT_ID $PUBLIC_GOOGLE_CLIENT_ID
ENV PUBLIC_WATSON_BACKEND_URL $PUBLIC_WATSON_BACKEND_URL
ENV SUPER_SECRET_SESSION_KEY $SUPER_SECRET_SESSION_KEY

WORKDIR /app
COPY package.json ./
RUN npm install

COPY . .
RUN npm run build

EXPOSE 3000
CMD ["node","entry.js"]